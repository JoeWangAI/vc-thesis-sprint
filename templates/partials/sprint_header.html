<div class="sprint-title-row">
    <h1 class="sprint-title">{{ current_sprint.name }}</h1>
    <div class="sprint-actions">
        <button class="btn btn-secondary"
                hx-get="/sprints/{{ current_sprint.id }}/edit"
                hx-target="#modal-container"
                hx-swap="innerHTML">
            Edit Criteria
        </button>
        <button class="btn btn-primary" id="generate-btn"
                hx-post="/sprints/{{ current_sprint.id }}/discover"
                hx-target="#company-list"
                hx-swap="innerHTML"
                hx-indicator="#generate-loading-indicator, #discovery-loading-overlay"
                hx-disabled-elt="this"
                aria-label="Generate candidate companies using AI"
                title="Generate candidate companies using AI">
            <span class="btn-text">Generate Candidates</span>
            <span class="btn-loading"
                  role="status"
                  aria-live="polite">
                <span class="loading-spinner" aria-hidden="true"></span>
                Generating...
            </span>
        </button>
        <div id="generate-loading-indicator" class="generate-loading-details htmx-indicator">
            <span class="loading-spinner"></span>
            Using AI to analyze companies. This typically takes 10-15 seconds.
        </div>
    </div>
</div>

<div class="thesis-box">
    <div class="thesis-label">Thesis</div>
    <div class="thesis-text">{{ current_sprint.description }}</div>
</div>

<div class="filters-row">
    <div class="filter-tag editable">
        <span class="label">Stage:</span>
        <span class="value">{{ current_sprint.stage_focus }}</span>
    </div>
    <div class="filter-tag editable">
        <span class="label">Geography:</span>
        <span class="value">{{ current_sprint.geography }}</span>
    </div>
    <div class="filter-tag editable">
        <span class="label">Last Raise:</span>
        <span class="value">{{ current_sprint.last_raise_filter }}</span>
    </div>
    {% if current_sprint.keywords_include %}
    <div class="filter-tag editable">
        <span class="label">Keywords:</span>
        <span class="value">
            {% for kw in current_sprint.keywords_include %}+{{ kw }}{% if not loop.last %}, {% endif %}{% endfor %}
            {% for kw in current_sprint.keywords_exclude %}, -{{ kw }}{% endfor %}
        </span>
    </div>
    {% endif %}
</div>
